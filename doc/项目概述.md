# PawzyPop - 宠物消消乐游戏

## 项目简介

PawzyPop 是一款基于 Unity 开发的 2D 消消乐游戏，玩家通过滑动交换相邻的宠物图块，将三个或更多相同类型的图块连成一线即可消除得分。

## 技术栈

- **游戏引擎**: Unity 2022.3 LTS
- **编程语言**: C#
- **目标平台**: Android、iOS、PC

## 项目结构

```
PawzyPop/
├── Assets/
│   ├── Editor/                 # 编辑器扩展工具
│   │   ├── GameSetupWindow.cs  # 游戏设置窗口
│   │   └── TileTypeCreator.cs  # Tile类型创建工具
│   ├── Prefabs/                # 预制体
│   │   └── Tile.prefab         # 图块预制体
│   ├── Resources/              # 资源文件
│   │   ├── Levels/             # 关卡配置 (JSON)
│   │   ├── Sprites/            # 图片资源
│   │   └── TileTypes/          # 图块类型配置 (ScriptableObject)
│   ├── Scenes/                 # 场景文件
│   │   └── SampleScene.unity   # 主场景
│   └── Scripts/                # 脚本代码
│       ├── Audio/              # 音频管理
│       ├── Core/               # 核心游戏逻辑
│       ├── Data/               # 数据管理
│       ├── Effects/            # 特效系统
│       └── UI/                 # 用户界面
├── doc/                        # 项目文档
├── Packages/                   # Unity 包管理
└── ProjectSettings/            # 项目设置
```

## 核心模块

### 1. Core - 核心游戏逻辑

| 文件 | 说明 |
|------|------|
| `Board.cs` | 游戏棋盘管理，负责生成、布局和管理所有图块 |
| `Tile.cs` | 单个图块的行为和状态管理 |
| `TileType.cs` | 图块类型定义 (ScriptableObject) |
| `MatchFinder.cs` | 匹配检测算法，查找三消及以上的匹配 |
| `MatchProcessor.cs` | 匹配处理，执行消除、下落、填充逻辑 |
| `InputManager.cs` | 输入处理，支持鼠标和触摸操作 |
| `GameManager.cs` | 游戏状态管理，控制游戏流程 |
| `LevelLoader.cs` | 关卡加载器 |
| `CameraScaler.cs` | 相机自适应缩放，适配不同屏幕 |

### 2. Data - 数据管理

| 文件 | 说明 |
|------|------|
| `LevelData.cs` | 关卡数据结构定义 |
| `SaveManager.cs` | 存档管理，保存/加载游戏进度 |

### 3. UI - 用户界面

| 文件 | 说明 |
|------|------|
| `GameUI.cs` | 游戏主界面 UI |
| `MenuUI.cs` | 菜单界面 |
| `PopupBase.cs` | 弹窗基类 |
| `WinPopup.cs` | 胜利弹窗 |
| `LosePopup.cs` | 失败弹窗 |
| `PausePopup.cs` | 暂停弹窗 |
| `UIManager.cs` | UI 管理器 |

### 4. Effects - 特效系统

| 文件 | 说明 |
|------|------|
| `ParticleManager.cs` | 粒子特效管理 |

### 5. Audio - 音频系统

| 文件 | 说明 |
|------|------|
| `AudioManager.cs` | 音频管理器 |

## 游戏配置

### 图块类型 (TileTypes)

游戏包含 6 种宠物图块：
- Corgi (柯基)
- Golden (金毛)
- Husky (哈士奇)
- Samoyed (萨摩耶)
- Shiba (柴犬)
- Teddy (泰迪)

### 关卡配置

关卡配置存储在 `Resources/Levels/` 目录下，使用 JSON 格式：

```json
{
  "levelId": 1,
  "targetScore": 1000,
  "maxMoves": 20,
  "boardWidth": 6,
  "boardHeight": 6
}
```

## 构建说明

### Android 构建

1. 打开 Unity 编辑器
2. File → Build Settings
3. 选择 Android 平台
4. Player Settings 中配置：
   - Package Name: `com.meng.pawzy`
   - Minimum API Level: 23
5. 点击 Build 生成 APK

### 屏幕适配

游戏使用 `CameraScaler` 组件自动适配不同屏幕尺寸：
- 自动计算正交相机大小
- 支持竖屏和横屏
- 确保游戏内容在所有设备上居中显示

## 开发规范

### 命名空间

所有脚本使用 `PawzyPop` 命名空间：
- `PawzyPop.Core` - 核心逻辑
- `PawzyPop.Data` - 数据管理
- `PawzyPop.UI` - 用户界面
- `PawzyPop.Effects` - 特效系统
- `PawzyPop.Audio` - 音频系统

### 单例模式

核心管理类使用单例模式：
- `Board.Instance`
- `GameManager.Instance`
- `InputManager.Instance`
- `MatchFinder.Instance`
- `MatchProcessor.Instance`

## 版本信息

- **当前版本**: 1.0.1
- **Unity 版本**: 2022.3 LTS
- **仓库地址**: https://github.com/whalesmeng/unityPawzy
